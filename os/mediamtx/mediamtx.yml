# https://github.com/bluenviron/mediamtx/blob/v1.16.1/mediamtx.yml

# https://mediamtx.org/docs/usage/webrtc-specific-features#solving-webrtc-connectivity-issues
webrtcAdditionalHosts:
  [localhost, planktoscope.local, 192.168.4.1, raspberrypi, raspberrypi.local]

# https://mediamtx.org/docs/usage/decrease-packet-loss
writeQueueSize: 1024

# ICE servers. Needed only when local listeners can't be reached by clients.
# STUN servers allows to obtain and share the public IP of the server.
# TURN/TURNS servers forces all traffic through them.
webrtcICEServers2:
  - url: stun:stun.cloudflare.com:3478 # Cloudfare
  - url: stun:stun.fbsbx.com:3478 # Facebook / Meta
  # Google stun server is meh
  # https://www.youtube.com/watch?v=sO3-GbDWZG4
  # - url: stun.l.google.com:19302

paths:
  # This is published by controller at rtsp://127.0.0.1:8554/cam
  # http://planktoscope-sponge-bob:8889/cam/
  # the controler must be started after mediamtx
  cam:
    # https://github.com/bluenviron/mediamtx/pull/5335
    alwaysAvailable: true
    alwaysAvailableTracks:
      - codec: H264
