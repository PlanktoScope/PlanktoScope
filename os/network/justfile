setup:
    sudo apt install -y network-manager firewalld dnsmasq-base
    sudo cp public.xml /etc/firewalld/zones/
    sudo systemctl enable NetworkManager firewalld
    sudo cp -r cfg80211_regdomain.conf /etc/modprobe.d/
    sudo cp wlan0-hotspot.ini /etc/NetworkManager/system-connections/wlan0-hotspot.nmconnection
    # "failed to load connection: File permissions (100644) are insecure"
    sudo chmod 0600 /etc/NetworkManager/system-connections/wlan0-hotspot.nmconnection
    # By default we are greeted with
    # "Wi-Fi is currently blocked by rfkill.
    # Use raspi-config to set the country before use."
    # We want to enable wifi so that the user can set the country themselves.
    sudo rfkill unblock wifi
    sudo nmcli radio wifi on

format:
    just --fmt --unstable

test:
    just --fmt --check --unstable
    validator public.xml
    validator wlan0-hotspot.ini
